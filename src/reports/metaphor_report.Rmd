---
title: "Metaphors in Kickstarter campaigns"
output: html_document
---


```{r include=FALSE}
library(tidyverse)
library(lme4)
library(party)
```

# Introduction

People describe their experience with cancer in a number of ways. Many of these descriptions are metaphorical (Gibbs and Franks, 2002), e.g. describing cancer as an *obstacle* on a journey ("cancer was something I needed to get through"), an opponent in a *war* ("the disease was an aggressive opponent that I had to fight"), and more. Additionally, some of these metaphors for experiences with cancer (e.g. a *battle* vs. a *journey*) have been shown to differentially influence emotional inferences in the lab (Hendrics & Boroditsky, 2016), suggesting that the way we talk about hardship could have important implications for decision-making and emotional well-being.

One relatively unexplored domain is the language used to describe cancer in a fundraising context. In the USA alone, the National Center for Charitable Statistics (https://nccs.urban.org/) estimates almost 500 registered nonprofits in the realm of cancer research, with a total revenue of over **$1 billion**. And this number doesn't include the many grassroots campaigns conducted online, through platforms such as Kickstarter, Classy, and GoFundMe. 

While there is some work on the role of message framing and valence in charitable giving (Chang and Lee, 2009), this research has not yet explored the functional role of **metaphor framing**. This gives us the opportunity to both **characterize** the kinds of metaphors used in online fundraising campaigns (e.g. relative frequency, productivity, etc.), as well as ask whether they **predict** fundraising outcomes (e.g. amount raised, average transaction size, number of donations, etc.). 

# Dataset

```{r}

setwd("/Users/seantrott/Dropbox/UCSD/Research/ComputationalLinguistics/nlp_cancer_metaphor")
df = read_csv("data/processed/projects_with_metaphors.csv")


df = na.omit(df)
```


We considered all Kickstarter campaigns with the word "cancer" in the title of the campaign. This yielded a total of `r nrow(df)` campaigns.

```{r}
df = df %>%
  filter(backers > 0)
```

We further restricted our analysis to campaigns with at least one donation, giving us a total of `r nrow(df)` campaigns.

Note that certain columns are highly skewed, such as the *amount pledged*.

```{r}
df %>%
  ggplot(aes(x = pledged)) +
  geom_histogram() +
  theme_minimal()
```

We create two new columns: the amount pledged (logged), and the average transaction. 

```{r}
df$pledged_logged = log10(df$pledged + 1)
df$avg_transaction = df$pledged / df$backers
df$status = factor(df$status)
df$dominant_metaphor = factor(df$dominant)
```

# Metaphor detection and tagging

[ We both used an automated keyword search, and also relabeled all campaigns by hand by validing whether the occurrence of a keyword constituted a metaphor use. ]

# Characterization

[ More here: productivity, metaphor by campaign type, etc. ]


# Do metaphors impact campaign outcomes?

When modeling the relationship between **metaphor** and **fundraising outcome**, there is the question of whether to compare all metaphor tags (e.g. "both", "battle", "journey", and "neither"), or only the specific metaphors under consideration (e.g. "battle" vs. "journey").

We will conduct both sets of analyses and compare the results across each set, beginning by asking whether addin *all* of the metaphor tags adds explanatory value to a model.

## Average transaction size

To understand whether metaphor impacts average transaction size (amount pledged divided by #backers), we should first examine the distribution of dependent values.

```{r}
df %>%
  ggplot(aes(x = avg_transaction)) +
  geom_histogram() +
  theme_minimal()
```

We see that it is highly skewed (which makes sense, considering that it came from the amount pledged). Skewed data can offset the results of a linear regression, with the outliers playing an overlarge role in the fitting of the line. There are several approaches to dealing with a skewed dependent variable:  

1. **Log-transforming the variable**: As seen below, this tends to produce a more "normal" distribution.
2. **Removing outliers**: If the skew appears discontinuous, one can also either remove points that seem like outliers, or split the data and perform multiple analyses. 

For these initial analyses, we will proceed by log-transfomring the dependent variable.

```{r}
df %>%
  # filter(dominant_metaphor %in% c("Battle", "Journey")) %>%
  ggplot(aes(x = dominant_metaphor,
             y = avg_transaction)) +
  geom_boxplot(outlier.shape = NA) +
  scale_y_log10() +
  theme_minimal()
```


### Mixed effects comparison

Of course, the analysis above does not control for other variables that might influence campagin outcomes. Below, we consider two of these variables: one linguistic (the length of the campaign text), and one situational (whether that campaign was selected as *staff pick*). We also add random intercepts for the country and state in which the campaign was launched.

We then use model comparisons to ask whether including a fixed effect of the *dominant metaphor* in a campaign explains additional variance beyond these variables.

```{r}
avg_transaction_full = lmer(data = df,
                            log10(avg_transaction) ~ dominant_metaphor + staff_pick + text_length_words + (1 | geo_country) + (1 | geo_state),
                    REML=FALSE)

avg_transaction_reduced = lmer(data = df,
                            log10(avg_transaction) ~  staff_pick + text_length_words + (1 | geo_country) + (1 | geo_state),
                            REML=FALSE)


anova(avg_transaction_full, avg_transaction_reduced)
```

Notably, when we restrict our analysis to only those campaigns with a more salient "battle" or "journey" metaphor, including **dominant_metaphor** yields a much more significant improvement.

```{r}
coded = filter(df, dominant_metaphor %in% c("Battle", "Journey"))
avg_transaction_full = lmer(data = coded,
                            log10(avg_transaction) ~ dominant_metaphor + staff_pick + text_length_words + (1 | geo_country) + (1 | geo_state),
                    REML=FALSE)

avg_transaction_reduced = lmer(data = coded,
                            log10(avg_transaction) ~  staff_pick + text_length_words + (1 | geo_country) + (1 | geo_state),
                            REML=FALSE)


anova(avg_transaction_full, avg_transaction_reduced)
```

## Campaign status

Campaigns are also tagged with a **status**, including whether they succeeded or failed (as well as whether they were canceled, suspended, or are still live). For the analysis below, we will consider only those campaigns which ended naturally, and thus were either *successful* or *unsuccessful*.

```{r}
df_finished = df %>%
  filter(status %in% c("successful", "failed"))
simple = glm(data = df_finished,
             status ~ metaphor,
             family = binomial())
summary(simple)
```

```{r}
df_finished %>%
  ggplot(aes(x = dominant_metaphor,
             fill = status)) +
  geom_bar(stat = "count", position = "dodge") +
  theme_minimal()


df_finished %>%
  ggplot(aes(x = metaphor,
             fill = status)) +
  geom_bar(stat = "count", position = "dodge") +
  theme_minimal()
```




